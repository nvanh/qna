<!DOCTYPE html>
<html lang="vi">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Ôn tập KHTN Lớp 6 - HKI</title>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=arrow_back" />
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
		<link href="style.css" rel="stylesheet" />
	</head>
	<body>
		<!-- Result Modal -->
		<div class="modal fade" id="resultModal" tabindex="-1" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header bg-primary text-white">
						<h5 class="modal-title" id="resultTitle"></h5>
					</div>
					<div class="modal-body text-center">
						<p id="resultMessage" class="fs-4"></p>
						<div class="d-flex justify-content-center align-items-center gap-3">
							<p>Correct: <span id="resultCorrect" class="stats-correct fw-bold fs-3"></span></p>
							<p>Incorrect: <span id="resultIncorrect" class="stats-incorrect fw-bold fs-3"></span></p>
							<p>Time: <span id="resultTime" class="fw-bold fs-3"></span></p>
						</div>
						<button class="btn btn-lg btn-primary mt-3" onclick="restartQuiz()">Retest</button>
					</div>
				</div>
			</div>
		</div>

		<!-- Main Content -->
		<div class="w-100">
			<div class="header d-flex justify-content-center align-items-center bg-dark text-white w-100">
        <a href="index.html" class="text-decoration-none text-white me-5"><span class="material-symbols-outlined">arrow_back</span></a>
				<div id="timer" class="fs-5 justify-self-start">Time: 0s</div>
				<h1 class="text-center m-0">Ôn tập Khoa học Tự nhiên Lớp 6 - HKI</h1>
				<div id="stats" class="text-end">
					<div>Correct: <span class="stats-correct">0</span></div>
					<div>Incorrect: <span class="stats-incorrect">0</span></div>
				</div>
			</div>
			<div class="play mx-auto">
				<div id="question" class="question-display"></div>
				<div id="options" class="d-flex flex-wrap justify-content-center"></div>
				<div class="text-center">
					<button id="confirmBtn" class="btn btn-success confirm-btn" disabled>Confirm (Phím Space)</button>
				</div>
			</div>
		</div>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
		<script>
			const correctSound = new Audio("correct.mp3");
			const errorSound = new Audio("error.mp3");

			const questions = [
				{
					question: "Câu 1. Đơn vị đo độ dài trong Hệ đơn vị đo lường hợp pháp của nước ta là",
					options: ["cm.", "m.", "km.", "mm."],
					correct: "m.",
				},
				{
					question: "Câu 2. Nhiệt độ của nước trong phòng thí nghiệm theo nhiệt giai Celsius là 27°Ứng với nhiệt giai Fahrenheit, nhiệt độ này là",
					options: ["48,6°F.", "80,6°F.", "15°F.", "47°F."],
					correct: "80,6°F.",
				},
				{
					question: "Câu 3. Lĩnh vực nào nghiên cứu về chất và sự biến đổi của chất?",
					options: ["Sinh học.", "Hóa học.", "Vật lí.", "Thiên văn học."],
					correct: "Hóa học.",
				},
				{
					question: "Câu 4. Kí hiệu cảnh báo nào sau đây cho biết em đang ở gần vị trí có hóa chất ăn mòn?",
					options: ["A.", "B.", "C.", "D."],
					correct: "A.",
				},
				{
					question: "Câu 5. Chất khí nào sau đây đạt chiếm tỉ lệ thể tích lớn nhất trong không khí?",
					options: ["Oxygen.", "Hydrogen.", "Nitrogen.", "Carbon dioxide."],
					correct: "Nitrogen.",
				},
				{
					question: "Câu 6. Từ/cụm từ nào sau đây không phải chất?",
					options: ["Thân cây mía.", "Đường saccharose.", "Nước.", "Cellulose."],
					correct: "Thân cây mía.",
				},
				{
					question: "Câu 7. Muốn dập tắt đám cháy nhỏ do xăng, dầu gây ra, ta có thể sử dụng",
					options: ["Xăng hoặc dầu phun vào đám cháy.", "Cát hoặc vải dày ẩm trùm kín đám cháy.", "Nước để dập tắt đám cháy.", "Khí oxygen phun vào đám cháy."],
					correct: "Cát hoặc vải dày ẩm trùm kín đám cháy.",
				},
				{
					question: "Câu 8. Trong các vật liệu sau, vật liệu nào dẫn điện tốt?",
					options: ["Thủy tinh.", "Gốm.", "Gỗ.", "Kim loại."],
					correct: "Kim loại.",
				},
				{
					question: "Câu 9. Nhà máy sản xuất rượu vang dùng quả nho để lên men. Vậy nho là",
					options: ["Vật liệu.", "nhiên liệu.", "nguyên liệu.", "khoáng sản."],
					correct: "nguyên liệu.",
				},
				{
					question: "Câu 10. Chất khí nào sau đây cần thiết cho sự cháy?",
					options: ["Oxygen.", "Hydrogen.", "Nitrogen.", "Carbon dioxide."],
					correct: "Oxygen.",
				},
				{
					question: "Câu 11. Khi dùng gỗ để sản xuất giấy thì người ta sẽ gọi gỗ là",
					options: ["Vật liệu.", "nhiên liệu.", "nguyên liệu.", "khoáng sản."],
					correct: "nguyên liệu.",
				},
				{
					question: "Câu 12. Cây trồng nào sau đây *không* được xem là cây lương thực?",
					options: ["Lúa gạo.", "Mía.", "Lúa mì.", "Lúa mạch."],
					correct: "Mía.",
				},
				{
					question: "Câu 13. Các loại thực phẩm nào dưới đây *không* có nguồn gốc từ thực vật?",
					options: ["Thịt.", "Rau xanh.", "Khoai lang.", "Táo."],
					correct: "Thịt.",
				},
				{
					question: "Câu 14. Để phân biệt sự vật với vật không sống cần những đặc điểm nào sau đây?\nI. Khả năng chuyển động.\nII. Có sự trao đổi chất.\nIII. Khả năng lớn lên.\nIV. Khả năng sinh sản.",
					options: ["I, II, III, IV.", "I, II, IV.", "I, II, III.", "II, III, IV."],
					correct: "II, III, IV.",
				},
				{
					question: "Câu 15. Cho các dãy các nguyên liệu sau: tre, mía, dầu thô, quặng, bông. Nguyên liệu không thể tái sinh là",
					options: ["1.", "2.", "3.", "4."],
					correct: "2.",
				},
				{
					question: "Câu 16. Các chất trong dãy nào sau đây đều là vật thể?",
					options: ["Cái thìa nhôm, cái ấm sắt, calcium.", "Con mèo, con dao, máy giặt.", "Sắt, nhôm, mâm đồng.", "Bông đèn, điện thoại, thủy ngân."],
					correct: "Con mèo, con dao, máy giặt.",
				},
				{
					question: "Câu 17. Trong các thực phẩm dưới đây, loại nào chứa nhiều protein (chất đạm) nhất?",
					options: ["Thịt.", "Gạo.", "Rau xanh.", "Hoa quả."],
					correct: "Thịt.",
				},
				{
					question: "Câu 18. Hiện tượng thạch nhũ trong hang động là do ăn mòn",
					options: ["đá vôi.", "cát.", "gạch.", "than đá."],
					correct: "đá vôi.",
				},
				{
					question: "Câu 19. Trong hệ thống phân loại thế giới sống, trùng biến hình thuộc giới nào?",
					options: ["Khởi sinh.", "Nguyên sinh.", "Thực vật.", "Động vật."],
					correct: "Nguyên sinh.",
				},
				{
					question: "Câu 20. Loại tế bào nào sau đây phải dùng kính hiển vi mới quan sát được?",
					options: ["Tế bào trứng đà điểu.", "Tế bào trứng gà.", "Tế bào rôi xanh.", "Tế bào tép bưởi."],
					correct: "Tế bào rôi xanh.",
				},
				{
					question: "Câu 21. Cơ thể đơn bào và cơ thể đa bào khác nhau chủ yếu ở điểm nào?",
					options: ["Số lượng tế bào tạo thành.", "Hình dạng.", "Kích thước.", "Hình dạng."],
					correct: "Số lượng tế bào tạo thành.",
				},
				{
					question: "Câu 22. Cơ thể sinh vật nào sau đây là sinh vật đơn bào?",
					options: ["Cây cam.", "Tảo lục.", "Con cá chép.", "Con sư tử."],
					correct: "Tảo lục.",
				},
				{
					question: "Câu 23. Hiện tượng nào dưới đây không phản ánh sự lớn lên và phân chia của tế bào?",
					options: ["Sự gia tăng diện tích bề mặt của một chiếc lá.", "Sự xếp, phồng của các tế bào khi không khí.", "Sự tăng kích thước của một khoai lang.", "Sự vươn cao của thân cây tre."],
					correct: "Sự xếp, phồng của các tế bào khi không khí.",
				},
				{
					question: "Câu 24. Tại sao nói “Tế bào là đơn vị cơ bản của sự sống”?",
					options: ["Vì tế bào có kích thước rất nhỏ bé.", "Vì tế bào có thể thực hiện đầy đủ các quá trình sống cơ bản như trao đổi chất, cảm ứng, sinh trưởng...", "Vì tế bào không có khả năng sinh sản.", "Vì tế bào rất vững chắc."],
					correct: "Vì tế bào có thể thực hiện đầy đủ các quá trình sống cơ bản như trao đổi chất, cảm ứng, sinh trưởng...",
				},
				{
					question: "Câu 25. Tế bào nào sau đây là tế bào động vật?",
					options: ["Tế bào lông hút.", "Tế bào chóp rễ.", "Tế bào xương.", "Tế bào thịt lá."],
					correct: "Tế bào xương.",
				},
				{
					question: "Câu 26. Tế bào nào sau đây là tế bào thực vật?",
					options: ["Tế bào thần kinh.", "Tế bào cơ tim.", "Tế bào xương.", "Tế bào thịt lá."],
					correct: "Tế bào thịt lá.",
				},
				{
					question: "Câu 27. Sơ đồ thể hiện mối quan hệ giữa các cấp tổ chức của cơ thể đa bào từ thấp đến cao.",
					options: ["Mô → Tế bào → Cơ quan → Hệ cơ quan → Cơ thể.", "Tế bào → Mô → Cơ thể → Hệ cơ quan → Cơ quan.", "Tế bào → Mô → Cơ quan → Hệ cơ quan → Cơ thể.", "Tế bào → Mô → Hệ cơ quan → Cơ quan → Cơ thể."],
					correct: "Tế bào → Mô → Cơ quan → Hệ cơ quan → Cơ thể.",
				},
				{
					question: "Câu 28. Trong cơ thể đa bào, tập hợp các tế bào giống nhau cùng thực hiện một chức năng nhất định gọi là",
					options: ["tế bào.", "mô.", "cơ quan.", "hệ cơ quan."],
					correct: "mô.",
				},
				{
					question: "Câu 29. Loại tế bào nào dưới đây *không* phải là tế bào thực vật?",
					options: ["Tế bào biểu bì.", "Tế bào lông hút.", "Tế bào mạch dẫn.", "Tế bào thần kinh."],
					correct: "Tế bào thần kinh.",
				},
				{
					question:
						"Câu 30. Cho các đặc điểm sau:\n(1) Cơ thể được cấu tạo từ nhiều tế bào.\n(2) Mỗi loại tế bào thực hiện một chức năng khác nhau.\n(3) Một tế bào có thể thực hiện được các chức năng của cơ thể sống.\n(4) Cơ thể có cấu tạo phức tạp.\n(5) Đa phần có kích thước cơ thể nhỏ bé.\nCác đặc điểm nào *không* phải là đặc điểm của cơ thể đa bào?",
					options: ["(1), (3).", "(2), (4).", "(3), (5).", "(1), (4)."],
					correct: "(3), (5).",
				},
				{
					question: "Câu 31. Trong hệ thống phân loại thế giới sống, trùng bình thuộc giới nào?",
					options: ["Khởi sinh.", "Nguyên sinh.", "Thực vật.", "Động vật."],
					correct: "Nguyên sinh.",
				},
				{
					question: "Câu 32. Xác định tên khoa học của loài cây hình bên:",
          image: "https://bizweb.dktcdn.net/thumb/large/100/068/166/products/6-76ccb75f-cbc8-4a3d-b0b6-9f5af3c22db0.jpg?v=1458641277537",
					options: ["Vải.", "Lệ chi.", "Litchi.", "Litchi chinensis."],
					correct: "Litchi chinensis.",
				},
				{
					question: "Câu 33. Loài muồng hoàng yến còn có tên là muồng hoàng hậu, bồ cạp vàng, bồ cạp nước, hoa lồng đèn. Tên chung của loài toàn thế giới sử dụng là *Cassia fistula* L. Em hãy cho biết, trong tên này, *fistula* L là",
					options: ["tên chi.", "tên loài.", "tên bộ.", "tên lớp."],
					correct: "tên loài.",
				},
				{
					question: "Câu 34. Lạc đà hai bướu có tên khoa học là: *Camelus bactrianus*. Trong tên này, *Camelus* là",
					options: ["tên chi.", "tên loài.", "tên bộ.", "tên lớp."],
					correct: "tên chi.",
				},
			];

			let currentQuestionIndex = 0;
			let correctCount = 0;
			let incorrectCount = 0;
			let selectedOption = null;
			let timerInterval = null;
			let secondsElapsed = 0;
			let shuffledQuestions = [];

			const resultModal = new bootstrap.Modal(document.getElementById("resultModal"));

			function shuffleArray(array) {
				for (let i = array.length - 1; i > 0; i--) {
					const j = Math.floor(Math.random() * (i + 1));
					[array[i], array[j]] = [array[j], array[i]];
				}
				return array;
			}

			function startQuiz() {
				currentQuestionIndex = 0;
				correctCount = 0;
				incorrectCount = 0;
				shuffledQuestions = shuffleArray([...questions]);
				secondsElapsed = 0;

				updateStats();
				loadQuestion();
				startTimer();
			}

			function startTimer() {
				if (timerInterval) clearInterval(timerInterval);
				secondsElapsed = 0;
				document.getElementById("timer").textContent = `Time: ${secondsElapsed}s`;
				timerInterval = setInterval(() => {
					secondsElapsed++;
					document.getElementById("timer").textContent = `Time: ${secondsElapsed}s`;
				}, 1000);
			}

			function updateStats() {
				document.querySelector("#stats .stats-correct").textContent = correctCount;
				document.querySelector("#stats .stats-incorrect").textContent = incorrectCount;
			}

			function loadQuestion() {
				if (currentQuestionIndex >= shuffledQuestions.length) {
					showResult();
					return;
				}

				const q = shuffledQuestions[currentQuestionIndex];
				const questionElement = document.getElementById("question");
				let formattedQuestion = q.question.replace(/\*([^*]+)\*/g, '<span class="text-primary fw-bold">$1</span>');
				questionElement.innerHTML = formattedQuestion;

				const playArea = document.querySelector(".play");
				let imageContainer = playArea.querySelector("#questionImageContainer");

				if (q.image) {
					if (!imageContainer) {
						imageContainer = document.createElement("div");
						imageContainer.id = "questionImageContainer";
						imageContainer.className = "text-center mb-4";
						const img = document.createElement("img");
						img.id = "questionImage";
						img.className = "img-fluid";
						img.style.maxHeight = "400px";
						img.alt = "Hình minh họa câu hỏi";
						imageContainer.appendChild(img);
						// Chèn ngay sau phần câu hỏi
						document.getElementById("question").after(imageContainer);
					}
					document.getElementById("questionImage").src = q.image;
					imageContainer.style.display = "block";
				} else {
					if (imageContainer) {
						imageContainer.style.display = "none";
					}
				}

				const optionsContainer = document.getElementById("options");
				const confirmBtn = document.getElementById("confirmBtn");
				confirmBtn.disabled = true;
				selectedOption = null;

				const shuffledOptions = shuffleArray([...q.options]);

				optionsContainer.innerHTML = "";

				shuffledOptions.forEach((option) => {
					const div = document.createElement("div");
					div.className = "option-pill";
					div.textContent = option;
					div.onclick = () => selectOption(div, option);
					optionsContainer.appendChild(div);
				});
			}

			function selectOption(element, option) {
				document.querySelectorAll(".option-pill").forEach((pill) => pill.classList.remove("selected"));
				element.classList.add("selected");
				selectedOption = option;
				document.getElementById("confirmBtn").disabled = false;
			}

			function checkAnswer() {
				const q = shuffledQuestions[currentQuestionIndex];
				const isCorrect = selectedOption === q.correct;
				const selectedPill = Array.from(document.querySelectorAll(".option-pill")).find((pill) => pill.textContent === selectedOption);

				if (isCorrect) {
					correctCount++;
					selectedPill.classList.add("correct");
					correctSound.play().catch((e) => console.log("Không phát được âm thanh Correct:", e));
				} else {
					incorrectCount++;
					selectedPill.classList.add("incorrect");
					const correctPill = Array.from(document.querySelectorAll(".option-pill")).find((pill) => pill.textContent === q.correct);
					if (correctPill) correctPill.classList.add("correct");
					errorSound.play().catch((e) => console.log("Không phát được âm thanh Incorrect:", e));
				}
				updateStats();

				setTimeout(() => {
					currentQuestionIndex++;
					loadQuestion();
				}, 1000);
			}

			function showResult() {
				clearInterval(timerInterval);
				document.getElementById("resultCorrect").textContent = correctCount;
				document.getElementById("resultIncorrect").textContent = incorrectCount;
				document.getElementById("resultTime").textContent = `${secondsElapsed}s`;

				if (correctCount === shuffledQuestions.length) {
					document.getElementById("resultTitle").textContent = "Excellent!";
					document.getElementById("resultMessage").textContent = "You achieved 100% accuracy.";
				} else {
					document.getElementById("resultTitle").textContent = "Finished!";
					document.getElementById("resultMessage").textContent = `You answered ${correctCount} out of ${shuffledQuestions.length} questions correctly. Give it another shot!`;
				}
				resultModal.show();
			}

			function restartQuiz() {
				resultModal.hide();
				startQuiz();
			}

			document.getElementById("confirmBtn").onclick = checkAnswer;
			document.addEventListener("keydown", (e) => {
				if (e.code === "Space" && !document.getElementById("confirmBtn").disabled) {
					e.preventDefault();
					checkAnswer();
				}
			});

			document.addEventListener("DOMContentLoaded", () => {
				startQuiz();
			});
		</script>
	</body>
</html>
